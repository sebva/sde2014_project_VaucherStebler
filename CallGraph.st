Object subclass: #CallGraph	instanceVariableNames: ''	classVariableNames: ''	poolDictionaries: ''	category: 'CallGraph'!!CallGraph commentStamp: 'RogerStebler 11/12/2014 21:07' prior: 0!A CallGraph uses the class hierarchy analyzer (CHA) algorithm to generate a call graph for a FAMIX model.!!CallGraph methodsFor: 'creating' stamp: 'RogerStebler 11/26/2014 17:21'!generateAll"Generates a dictionary containing for each method a set of possible receivers"	| class coneSet methods possibleReceivers dict |	methods := MooseModel root first allModelMethods asCollection.	dict := Dictionary new.	methods do: [ :method | 		class := method belongsTo.		coneSet :=  self cone: class.		(coneSet size > 1) ifTrue: [ 			possibleReceivers := Set new.			coneSet do: [ :c |				c methods do: [ :m | m signature = method signature ifTrue: [ possibleReceivers add: c ] ]			]		] ifFalse: [ possibleReceivers := coneSet ].		dict at: method put: possibleReceivers.	].	^dict.! !!CallGraph methodsFor: 'creating' stamp: 'RogerStebler 11/26/2014 16:55'!generate: aNumber"Generates a dictionary containing for each method a set of possible receivers. Only uses N methods with the largest LOC * NOIC value"	| collection sortedCollection methods method class coneSet possibleReceivers dict |	collection := MooseModel root first allModelMethods collect: [ :each | each->(each numberOfLinesOfCode * each incomingInvocations size) ].	sortedCollection := collection asSortedCollection: [:x :y | x value > y value].	methods := sortedCollection first: aNumber.		dict := Dictionary new.	methods do: [ :methodAssoc | 		method := methodAssoc key.		class := method belongsTo.		coneSet :=  self cone: class.		(coneSet size > 1) ifTrue: [ 			possibleReceivers := Set new.			coneSet do: [ :c |				c methods do: [ :m | m signature = method signature ifTrue: [ possibleReceivers add: c ] ]			]		] ifFalse: [ possibleReceivers := coneSet ].		dict at: method put: possibleReceivers.	].	^dict.! !!CallGraph methodsFor: 'private' stamp: 'RogerStebler 11/12/2014 21:08'!cone: aFamixClass"set of all subclasses, including the class itself"	| coneSet |	coneSet := aFamixClass withSubclassHierarchyGroup asSet.	^coneSet! !